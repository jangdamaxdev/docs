---
title: "Prerendering"
description: Nuxt cho phép các trang được render tĩnh tại thời điểm build để cải thiện một số metric về hiệu suất hoặc SEO
navigation.icon: i-lucide-file-code-2
---

Nuxt cho phép các trang được chọn từ ứng dụng của bạn được render tại thời điểm build. Nuxt sẽ phục vụ các trang đã được prebuilt khi được yêu cầu thay vì tạo chúng một cách tự động.

:read-more{title="Nuxt rendering modes" to="/docs/guide/concepts/rendering"}

## Crawl-based Pre-rendering

Sử dụng lệnh [`nuxt generate`](/docs/api/commands/generate) để build và pre-render ứng dụng của bạn bằng cách sử dụng [Nitro](/docs/guide/concepts/server-engine) crawler. Lệnh này tương tự như `nuxt build` với tùy chọn `nitro.static` được đặt thành `true`, hoặc chạy `nuxt build --prerender`.

Điều này sẽ build trang web của bạn, khởi tạo một instance nuxt, và theo mặc định, prerender trang root `/` cùng với bất kỳ trang nào của trang web mà nó liên kết đến, bất kỳ trang nào của trang web mà chúng liên kết đến, và tiếp tục như vậy.

::code-group{sync="pm"}

```bash [npm]
npx nuxt generate
```

```bash [yarn]
yarn nuxt generate
```

```bash [pnpm]
pnpm nuxt generate
```

```bash [bun]
bun x nuxt generate
```

::

Bây giờ bạn có thể triển khai thư mục `.output/public` đến bất kỳ dịch vụ hosting tĩnh nào hoặc xem trước cục bộ với `npx serve .output/public`.

Cách hoạt động của Nitro crawler:

1. Tải HTML của route root ứng dụng (`/`), bất kỳ trang không động nào trong thư mục `~/pages` của bạn, và bất kỳ route nào khác trong mảng `nitro.prerender.routes`.
2. Lưu HTML và `payload.json` vào thư mục `~/.output/public/` để được phục vụ tĩnh.
3. Tìm tất cả các thẻ anchor (`<a href="...">`) trong HTML để điều hướng đến các route khác.
4. Lặp lại các bước 1-3 cho mỗi thẻ anchor được tìm thấy cho đến khi không còn thẻ anchor nào để crawl.

Điều này quan trọng để hiểu vì các trang không được liên kết đến một trang có thể khám phá được không thể tự động pre-render.

::read-more{to="/docs/api/commands/generate#nuxt-generate"}
Đọc thêm về lệnh `nuxt generate`.
::

### Selective Pre-rendering

Bạn có thể chỉ định thủ công các route mà [Nitro](/docs/guide/concepts/server-engine) sẽ fetch và pre-render trong quá trình build hoặc bỏ qua các route mà bạn không muốn pre-render như `/dynamic` trong file `nuxt.config`:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    prerender: {
      routes: ["/user/1", "/user/2"],
      ignore: ["/dynamic"],
    },
  },
});
```

Bạn có thể kết hợp điều này với tùy chọn `crawlLinks` để pre-render một tập hợp các route mà crawler không thể khám phá như `/sitemap.xml` hoặc `/robots.txt` của bạn:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    prerender: {
      crawlLinks: true,
      routes: ["/sitemap.xml", "/robots.txt"],
    },
  },
});
```

Đặt `nitro.prerender` thành `true` tương tự như đặt `nitro.prerender.crawlLinks` thành `true`.

::read-more{to="https://nitro.build/config#prerender"}
Đọc thêm về pre-rendering trong tài liệu Nitro.
::

Cuối cùng, bạn có thể cấu hình thủ công điều này bằng cách sử dụng routeRules.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  routeRules: {
    // Đặt prerender thành true để cấu hình nó được prerendered
    "/rss.xml": { prerender: true },
    // Đặt nó thành false để cấu hình nó bị bỏ qua cho prerendering
    "/this-DOES-NOT-get-prerendered": { prerender: false },
    // Mọi thứ dưới /blog được prerendered miễn là nó
    // được liên kết từ một trang khác
    "/blog/**": { prerender: true },
  },
});
```

::read-more{to="https://nitro.build/config#routerules"}
Đọc thêm về cấu hình `routeRules` của Nitro.
::

Như một shorthand, bạn cũng có thể cấu hình điều này trong file trang bằng cách sử dụng [`defineRouteRules`](/docs/api/utils/define-route-rules).

::read-more{to="/docs/guide/going-further/experimental-features#inlinerouterules" icon="i-lucide-star"}
Tính năng này là thử nghiệm và để sử dụng nó bạn phải kích hoạt tùy chọn `experimental.inlineRouteRules` trong `nuxt.config` của bạn.
::

```vue [pages/index.vue]
<script setup>
// Hoặc đặt ở cấp độ trang
defineRouteRules({
  prerender: true,
});
</script>

<template>
  <div>
    <h1>Homepage</h1>
    <p>Pre-rendered tại thời điểm build</p>
  </div>
</template>
```

Điều này sẽ được chuyển đổi thành:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  routeRules: {
    "/": { prerender: true },
  },
});
```

## Runtime Prerender Configuration

### `prerenderRoutes`

Bạn có thể sử dụng điều này tại runtime trong một [Nuxt context](/docs/guide/going-further/nuxt-app#the-nuxt-context) để thêm nhiều route hơn cho Nitro để prerender.

```vue [pages/index.vue]
<script setup>
prerenderRoutes(["/some/other/url"]);
prerenderRoutes("/api/content/article/my-article");
</script>

<template>
  <div>
    <h1>Điều này sẽ đăng ký các route khác để prerendering khi được prerendered</h1>
  </div>
</template>
```

:read-more{title="prerenderRoutes" to="/docs/api/utils/prerender-routes"}

### `prerender:routes` Nuxt hook

Điều này được gọi trước khi prerendering để các route bổ sung được đăng ký.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hooks: {
    async "prerender:routes"(ctx) {
      const { pages } = await fetch("https://api.some-cms.com/pages").then(
        (res) => res.json(),
      );
      for (const page of pages) {
        ctx.routes.add(`/${page.name}`);
      }
    },
  },
});
```

### `prerender:generate` Nitro hook

Điều này được gọi cho mỗi route trong quá trình prerendering. Bạn có thể sử dụng điều này để xử lý chi tiết cho từng route được prerendered.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    hooks: {
      "prerender:generate"(route) {
        if (route.route?.includes("private")) {
          route.skip = true;
        }
      },
    },
  },
});
```