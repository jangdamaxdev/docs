---
title: "Transitions"
description: Apply transitions between pages and layouts with Vue or native browser View Transitions.
navigation.icon: i-lucide-toggle-right
---

::note
Nuxt tận dụng component [`<Transition>`](https://vuejs.org/guide/built-ins/transition.html#the-transition-component) của Vue để áp dụng transitions giữa các trang và layout.
::

## Page Transitions

Bạn có thể kích hoạt page transitions để áp dụng transition tự động cho tất cả các [trang](/docs/guide/directory-structure/pages).

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    pageTransition: { name: "page", mode: "out-in" },
  },
});
```

::note
Nếu bạn cũng đang thay đổi layout cũng như trang, page transition bạn đặt ở đây sẽ không chạy. Thay vào đó, bạn nên đặt [layout transition](/docs/getting-started/transitions#layout-transitions).
::

Để bắt đầu thêm transition giữa các trang, thêm CSS sau vào [`app.vue`](/docs/guide/directory-structure/app):

::code-group

```vue [app.vue]
<template>
  <NuxtPage />
</template>

<style>
.page-enter-active,
.page-leave-active {
  transition: all 0.4s;
}
.page-enter-from,
.page-leave-to {
  opacity: 0;
  filter: blur(1rem);
}
</style>
```

```vue [pages/index.vue]
<template>
  <div>
    <h1>Home page</h1>
    <NuxtLink to="/about">About page</NuxtLink>
  </div>
</template>
```

```vue [pages/about.vue]
<template>
  <div>
    <h1>About page</h1>
    <NuxtLink to="/">Home page</NuxtLink>
  </div>
</template>
```

::

Điều này tạo ra kết quả sau khi điều hướng giữa các trang:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665061349/nuxt3/nuxt3-page-transitions_umwvmh.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665061349/nuxt3/nuxt3-page-transitions_umwvmh.mp4" type="video/mp4">
</video>

Để đặt transition khác cho một trang, đặt khóa `pageTransition` trong [`definePageMeta`](/docs/api/utils/define-page-meta) của trang:

::code-group

```vue twoslash [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: "rotate",
  },
});
</script>
```

```vue [app.vue]
<template>
  <NuxtPage />
</template>

<style>
/* ... */
.rotate-enter-active,
.rotate-leave-active {
  transition: all 0.4s;
}
.rotate-enter-from,
.rotate-leave-to {
  opacity: 0;
  transform: rotate3d(1, 1, 1, 15deg);
}
</style>
```

::

Chuyển đến trang about sẽ thêm hiệu ứng xoay 3d:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665063233/nuxt3/nuxt3-page-transitions-cutom.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665063233/nuxt3/nuxt3-page-transitions-cutom.mp4" type="video/mp4">
</video>

## Layout Transitions

Bạn có thể kích hoạt layout transitions để áp dụng transition tự động cho tất cả các [layout](/docs/guide/directory-structure/layouts).

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    layoutTransition: { name: "layout", mode: "out-in" },
  },
});
```

Để bắt đầu thêm transition giữa các trang và layout, thêm CSS sau vào [`app.vue`](/docs/guide/directory-structure/app):

::code-group

```vue [app.vue]
<template>
  <NuxtLayout>
    <NuxtPage />
  </NuxtLayout>
</template>

<style>
.layout-enter-active,
.layout-leave-active {
  transition: all 0.4s;
}
.layout-enter-from,
.layout-leave-to {
  filter: grayscale(1);
}
</style>
```

```vue [layouts/default.vue]
<template>
  <div>
    <pre>default layout</pre>
    <slot />
  </div>
</template>

<style scoped>
div {
  background-color: lightgreen;
}
</style>
```

```vue [layouts/orange.vue]
<template>
  <div>
    <pre>orange layout</pre>
    <slot />
  </div>
</template>

<style scoped>
div {
  background-color: #eebb90;
  padding: 20px;
  height: 100vh;
}
</style>
```

```vue [pages/index.vue]
<template>
  <div>
    <h1>Home page</h1>
    <NuxtLink to="/about">About page</NuxtLink>
  </div>
</template>
```

```vue [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  layout: "orange",
});
</script>

<template>
  <div>
    <h1>About page</h1>
    <NuxtLink to="/">Home page</NuxtLink>
  </div>
</template>
```

::

Điều này tạo ra kết quả sau khi điều hướng giữa các trang:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665065289/nuxt3/nuxt3-layouts-transitions_c9hwlx.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665065289/nuxt3/nuxt3-layouts-transitions_c9hwlx.mp4" type="video/mp4">
</video>

Tương tự như `pageTransition`, bạn có thể áp dụng `layoutTransition` tùy chỉnh cho page component bằng cách sử dụng `definePageMeta`:

```vue twoslash [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  layout: "orange",
  layoutTransition: {
    name: "slide-in",
  },
});
</script>
```

## Global Settings

Bạn có thể tùy chỉnh các tên transition mặc định này một cách global bằng cách sử dụng `nuxt.config`.

Cả khóa `pageTransition` và `layoutTransition` đều chấp nhận [`TransitionProps`](https://vuejs.org/api/built-in-components.html#transition) dưới dạng giá trị JSON serializable nơi bạn có thể truyền `name`, `mode` và các transition-props hợp lệ khác của custom CSS transition.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    pageTransition: {
      name: "fade",
      mode: "out-in", // mặc định
    },
    layoutTransition: {
      name: "slide",
      mode: "out-in", // mặc định
    },
  },
});
```

::warning
Nếu bạn thay đổi thuộc tính `name`, bạn cũng phải đổi tên các lớp CSS tương ứng.
::

Để ghi đè thuộc tính transition global, sử dụng `definePageMeta` để định nghĩa page hoặc layout transitions cho một trang Nuxt duy nhất và ghi đè bất kỳ page hoặc layout transitions nào được định nghĩa global trong file `nuxt.config`.

```vue twoslash [pages/some-page.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: "bounce",
    mode: "out-in", // mặc định
  },
});
</script>
```

## Disable Transitions

`pageTransition` và `layoutTransition` có thể được vô hiệu hóa cho một route cụ thể:

```vue twoslash [pages/some-page.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: false,
  layoutTransition: false,
});
</script>
```

Hoặc globally trong `nuxt.config`:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    pageTransition: false,
    layoutTransition: false,
  },
});
```

## JavaScript Hooks

Đối với các trường hợp sử dụng nâng cao, bạn có thể sử dụng JavaScript hooks để tạo ra các transition rất động và tùy chỉnh cho các trang Nuxt.

Cách này trình bày các trường hợp sử dụng hoàn hảo cho các thư viện animation JavaScript như [GSAP](https://gsap.com).

```vue twoslash [pages/some-page.vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: "custom-flip",
    mode: "out-in",
    onBeforeEnter: (el) => {
      console.log("Before enter...");
    },
    onEnter: (el, done) => {},
    onAfterEnter: (el) => {},
  },
});
</script>
```

::tip
Tìm hiểu thêm về các [JavaScript hooks](https://vuejs.org/guide/built-ins/transition.html#javascript-hooks) bổ sung có sẵn trong component `Transition`.
::

## Dynamic Transitions

Để áp dụng dynamic transitions bằng cách sử dụng logic có điều kiện, bạn có thể tận dụng inline [middleware](/docs/guide/directory-structure/middleware) để gán một tên transition khác cho `to.meta.pageTransition`.

::code-group

```vue twoslash [pages/[id\].vue]
<script setup lang="ts">
definePageMeta({
  pageTransition: {
    name: "slide-right",
    mode: "out-in",
  },
  middleware(to, from) {
    if (to.meta.pageTransition && typeof to.meta.pageTransition !== "boolean")
      to.meta.pageTransition.name =
        +to.params.id! > +from.params.id! ? "slide-left" : "slide-right";
  },
});
</script>

<template>
  <h1>#{{ $route.params.id }}</h1>
</template>

<style>
.slide-left-enter-active,
.slide-left-leave-active,
.slide-right-enter-active,
.slide-right-leave-active {
  transition: all 0.2s;
}
.slide-left-enter-from {
  opacity: 0;
  transform: translate(50px, 0);
}
.slide-left-leave-to {
  opacity: 0;
  transform: translate(-50px, 0);
}
.slide-right-enter-from {
  opacity: 0;
  transform: translate(-50px, 0);
}
.slide-right-leave-to {
  opacity: 0;
  transform: translate(50px, 0);
}
</style>
```

```vue [layouts/default.vue]
<script setup lang="ts">
const route = useRoute();
const id = computed(() => Number(route.params.id || 1));
const prev = computed(() => "/" + (id.value - 1));
const next = computed(() => "/" + (id.value + 1));
</script>

<template>
  <div>
    <slot />
    <div v-if="$route.params.id">
      <NuxtLink :to="prev">⬅️</NuxtLink> |
      <NuxtLink :to="next">➡️</NuxtLink>
    </div>
  </div>
</template>
```

::

Trang bây giờ áp dụng transition `slide-left` khi đi đến id tiếp theo và `slide-right` cho id trước đó:

<video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665069410/nuxt3/nuxt-dynamic-page-transitions.jpg">
  <source src="https://res.cloudinary.com/nuxt/video/upload/v1665069410/nuxt3/nuxt-dynamic-page-transitions.mp4" type="video/mp4">
</video>

## Transition with NuxtPage

Khi `<NuxtPage />` được sử dụng trong `app.vue`, transitions có thể được cấu hình với prop `transition` để kích hoạt transitions toàn cầu.

```vue [app.vue]
<template>
  <div>
    <NuxtLayout>
      <NuxtPage
        :transition="{
          name: 'bounce',
          mode: 'out-in',
        }"
      />
    </NuxtLayout>
  </div>
</template>
```

::note
Nhớ rằng, page transition này không thể được ghi đè bằng `definePageMeta` trên các trang riêng lẻ.
::

## View Transitions API (experimental)

Nuxt được trang bị một implementation thử nghiệm của [**View Transitions API**](https://developer.chrome.com/docs/web-platform/view-transitions) (xem [MDN](https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API)). Đây là một cách mới thú vị để implement native browser transitions có khả năng (cùng với những thứ khác) chuyển đổi giữa các phần tử không liên quan trên các trang khác nhau.

Bạn có thể kiểm tra demo tại https://nuxt-view-transitions.surge.sh và [source trên StackBlitz](https://stackblitz.com/edit/nuxt-view-transitions).

Tích hợp Nuxt đang được phát triển tích cực, nhưng có thể được kích hoạt với tùy chọn `experimental.viewTransition` trong file cấu hình của bạn:

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    viewTransition: true,
  },
});
```

Các giá trị có thể là: `false`, `true`, hoặc `'always'`.

Nếu được đặt thành true, Nuxt sẽ không áp dụng transitions nếu trình duyệt của người dùng khớp với `prefers-reduced-motion: reduce` (được khuyến nghị). Nếu được đặt thành `always`, Nuxt sẽ luôn áp dụng transition và việc tôn trọng sở thích của người dùng là tùy thuộc vào bạn.

Theo mặc định, view transitions được bật cho tất cả các [trang](/docs/guide/directory-structure/pages), nhưng bạn có thể đặt một giá trị mặc định global khác.

```ts twoslash [nuxt.config.ts]
export default defineNuxtConfig({
  app: {
    // Vô hiệu hóa view transitions toàn cầu, và opt-in trên cơ sở từng trang
    viewTransition: false,
  },
});
```

Có thể ghi đè giá trị `viewTransition` mặc định cho một trang bằng cách đặt khóa `viewTransition` trong [`definePageMeta`](/docs/api/utils/define-page-meta) của trang:

```vue twoslash [pages/about.vue]
<script setup lang="ts">
definePageMeta({
  viewTransition: false,
});
</script>
```

::warning
Việc ghi đè view transitions trên cơ sở từng trang sẽ chỉ có hiệu lực nếu bạn đã bật tùy chọn `experimental.viewTransition`.
::

Nếu bạn cũng đang sử dụng Vue transitions như `pageTransition` và `layoutTransition` (xem ở trên) để đạt được kết quả tương tự như View Transitions API mới, thì bạn có thể muốn _vô hiệu hóa_ Vue transitions nếu trình duyệt của người dùng hỗ trợ web API native mới hơn. Bạn có thể làm điều này bằng cách tạo `~/middleware/disable-vue-transitions.global.ts` với nội dung sau:

```ts
export default defineNuxtRouteMiddleware((to) => {
  if (import.meta.server || !document.startViewTransition) {
    return;
  }

  // Vô hiệu hóa Vue transitions tích hợp
  to.meta.pageTransition = false;
  to.meta.layoutTransition = false;
});
```

### Known Issues

- Nếu bạn thực hiện data fetching trong các hàm setup trang của mình, bạn có thể muốn xem xét lại việc sử dụng tính năng này vào lúc này. (Theo thiết kế, View Transitions hoàn toàn đóng băng các cập nhật DOM trong khi chúng diễn ra.) Chúng tôi đang xem xét việc hạn chế View Transition đến những khoảnh khắc cuối cùng trước khi `<Suspense>` resolves, nhưng trong thời gian tạm thời, bạn có thể muốn xem xét cẩn thận việc có nên áp dụng tính năng này nếu điều này mô tả bạn.
