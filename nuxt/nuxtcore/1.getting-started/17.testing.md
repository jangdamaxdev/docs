---
title: Testing
description: Cách test ứng dụng Nuxt của bạn.
navigation.icon: i-lucide-circle-check
---

::tip
Nếu bạn là một module author, bạn có thể tìm thông tin cụ thể hơn trong [Module Author's guide](/docs/guide/going-further/modules#testing).
::

Nuxt cung cấp hỗ trợ first-class cho end-to-end và unit testing của ứng dụng Nuxt thông qua `@nuxt/test-utils`, một thư viện các utility và cấu hình test hiện đang được sử dụng trong [các test mà chúng tôi sử dụng trên chính Nuxt](https://github.com/nuxt/nuxt/tree/main/test) và các test trong toàn bộ hệ sinh thái module.

:video-accordion{title="Xem video từ Alexander Lichter về việc bắt đầu với @nuxt/test-utils" videoId="yGzwk9xi9gU"}

## Installation

Để cho phép bạn quản lý các dependency testing khác, `@nuxt/test-utils` đi kèm với các optional peer dependency khác nhau. Ví dụ:

- bạn có thể chọn giữa `happy-dom` và `jsdom` cho runtime Nuxt environment
- bạn có thể chọn giữa `vitest`, `cucumber`, `jest` và `playwright` cho end-to-end test runner
- `playwright-core` chỉ cần thiết nếu bạn muốn sử dụng built-in browser testing utility (và không sử dụng `@playwright/test` làm test runner)

::code-group{sync="pm"}
```bash [npm]
npm i --save-dev @nuxt/test-utils vitest @vue/test-utils happy-dom playwright-core
```
```bash [yarn]
yarn add --dev @nuxt/test-utils vitest @vue/test-utils happy-dom playwright-core
```
```bash [pnpm]
pnpm add -D @nuxt/test-utils vitest @vue/test-utils happy-dom playwright-core
```
```bash [bun]
bun add --dev @nuxt/test-utils vitest @vue/test-utils happy-dom playwright-core
```
::

## Unit Testing

Hiện tại chúng tôi cung cấp một environment cho unit testing code cần [Nuxt](https://nuxt.com) runtime environment. Hiện tại nó _chỉ hỗ trợ `vitest`_ (mặc dù contribution để thêm các runtime khác sẽ được chào đón).

### Setup

1. Thêm `@nuxt/test-utils/module` vào file `nuxt.config` của bạn (tùy chọn). Nó thêm tích hợp Vitest vào Nuxt DevTools của bạn để hỗ trợ chạy unit test trong development.

   ```ts twoslash
   export default defineNuxtConfig({
     modules: [
       '@nuxt/test-utils/module'
     ]
   })
   ```

2. Tạo file `vitest.config.ts` với nội dung sau:

   ```ts twoslash
   import { defineConfig } from 'vitest/config'
   import { defineVitestProject } from '@nuxt/test-utils/config'

   export default defineConfig({
     test: {
       projects: [
         {
           test: {
             name: 'unit',
             include: ['test/{e2e,unit}/*.{test,spec}.ts'],
             environment: 'node',
           },
         },
         await defineVitestProject({
           test: {
             name: 'nuxt',
             include: ['test/nuxt/*.{test,spec}.ts'],
             environment: 'nuxt',
           },
         }),
       ],
     },
   })
   ```

::tip
Khi import `@nuxt/test-utils` trong vitest config của bạn, cần thiết phải có `"type": "module"` được chỉ định trong `package.json` hoặc đổi tên file vitest config một cách thích hợp.
> tức là, `vitest.config.m{ts,js}`.
::

::tip
Có thể đặt biến môi trường cho testing bằng cách sử dụng file `.env.test`.
::

### Using a Nuxt Runtime Environment

Sử dụng [Vitest projects](https://vitest.dev/guide/projects.html#test-projects), bạn có kiểm soát chi tiết về test nào chạy trong environment nào:

- **Unit tests**: Đặt các regular unit test trong `test/unit/` - những test này chạy trong Node environment để có tốc độ
- **Nuxt tests**: Đặt các test dựa vào Nuxt runtime environment trong `test/nuxt/` - những test này sẽ chạy trong Nuxt runtime environment

#### Alternative: Simple Setup

Nếu bạn thích thiết lập đơn giản hơn và muốn tất cả test chạy trong Nuxt environment, bạn có thể sử dụng cấu hình cơ bản:

```ts twoslash
import { defineVitestConfig } from '@nuxt/test-utils/config'

export default defineVitestConfig({
  test: {
    environment: 'nuxt',
    // bạn có thể tùy chọn đặt các tùy chọn environment cụ thể của Nuxt
    // environmentOptions: {
    //   nuxt: {
    //     rootDir: fileURLToPath(new URL('./playground', import.meta.url)),
    //     domEnvironment: 'happy-dom', // 'happy-dom' (mặc định) hoặc 'jsdom'
    //     overrides: {
    //       // cấu hình Nuxt khác bạn muốn truyền
    //     }
    //   }
    // }
  }
})
```

Nếu bạn đang sử dụng simple setup với `environment: 'nuxt'` theo mặc định, bạn có thể opt _out_ khỏi [Nuxt environment](https://vitest.dev/guide/environment.html#test-environment) cho từng test file khi cần.

```ts twoslash
// @vitest-environment node
import { test } from 'vitest'

test('my test', () => {
  // ... test không có Nuxt environment!
})
```

::warning
Cách tiếp cận này không được khuyến nghị vì nó tạo ra một hybrid environment nơi Nuxt Vite plugin chạy nhưng Nuxt entry và `nuxtApp` không được khởi tạo. Điều này có thể dẫn đến các lỗi khó debug.
::

### Organizing Your Tests

Với thiết lập dựa trên project, bạn có thể tổ chức test như sau:

```bash [Directory structure]
test/
├── e2e/
│   └── ssr.test.ts
├── nuxt/
│   ├── components.test.ts
│   └── composables.test.ts
├── unit/
│   └── utils.test.ts
```

Bạn có thể tùy chọn bất kỳ cấu trúc test nào, nhưng việc giữ Nuxt runtime environment tách biệt khỏi Nuxt end-to-end test là quan trọng cho tính ổn định của test.

#### Running Tests

Với project setup, bạn có thể chạy các test suite khác nhau:

```bash
# Chạy tất cả test
npx vitest

# Chỉ chạy unit test
npx vitest --project unit

# Chỉ chạy Nuxt test
npx vitest --project nuxt

# Chạy test trong watch mode
npx vitest --watch
```

::warning
Khi bạn chạy test trong Nuxt environment, chúng sẽ chạy trong môi trường [`happy-dom`](https://github.com/capricorn86/happy-dom) hoặc [`jsdom`](https://github.com/jsdom/jsdom). Trước khi test chạy, một global Nuxt app sẽ được khởi tạo (bao gồm, ví dụ, chạy bất kỳ plugin hoặc code nào bạn đã định nghĩa trong `app.vue`).

Điều này có nghĩa là bạn nên đặc biệt cẩn thận để không thay đổi global state trong test (hoặc, nếu cần, reset nó sau đó).
::

### 🎭 Built-In Mocks

`@nuxt/test-utils` cung cấp một số built-in mock cho DOM environment.

#### `intersectionObserver`

Mặc định `true`, tạo một dummy class không có chức năng gì cho IntersectionObserver API

#### `indexedDB`

Mặc định `false`, sử dụng [`fake-indexeddb`](https://github.com/dumbmatter/fakeIndexedDB) để tạo một mock chức năng của IndexedDB API

Những thứ này có thể được cấu hình trong phần `environmentOptions` của file `vitest.config.ts`:

```ts twoslash
import { defineVitestConfig } from '@nuxt/test-utils/config'

export default defineVitestConfig({
  test: {
    environmentOptions: {
      nuxt: {
        mock: {
          intersectionObserver: true,
          indexedDb: true,
        }
      }
    }
  }
})
```

### 🛠️ Helpers

`@nuxt/test-utils` cung cấp một số helper để làm cho việc test Nuxt app dễ dàng hơn.

#### `mountSuspended`

`mountSuspended` cho phép bạn mount bất kỳ Vue component nào trong Nuxt environment, cho phép async setup và truy cập vào injection từ Nuxt plugin của bạn.

::note
Bên dưới, `mountSuspended` wrap `mount` từ `@vue/test-utils`, vì vậy bạn có thể xem [tài liệu Vue Test Utils](https://test-utils.vuejs.org/guide/) để biết thêm về các tùy chọn bạn có thể truyền, và cách sử dụng utility này.
::

Ví dụ:

```ts twoslash
// @noErrors
import { it, expect } from 'vitest'
import type { Component } from 'vue'
declare module '#components' {
  export const SomeComponent: Component
}
// ---cut---
// tests/components/SomeComponents.nuxt.spec.ts
import { mountSuspended } from '@nuxt/test-utils/runtime'
import { SomeComponent } from '#components'

it('can mount some component', async () => {
    const component = await mountSuspended(SomeComponent)
    expect(component.text()).toMatchInlineSnapshot(
        '"This is an auto-imported component"'
    )
})

```

```ts twoslash
// @noErrors
import { it, expect } from 'vitest'
// ---cut---
// tests/components/SomeComponents.nuxt.spec.ts
import { mountSuspended } from '@nuxt/test-utils/runtime'
import App from '~/app.vue'

// tests/App.nuxt.spec.ts
it('can also mount an app', async () => {
    const component = await mountSuspended(App, { route: '/test' })
    expect(component.html()).toMatchInlineSnapshot(`
      "<div>This is an auto-imported component</div>
      <div> I am a global component </div>
      <div>/</div>
      <a href="/test"> Test link </a>"
    `)
})
```

#### `renderSuspended`

`renderSuspended` cho phép bạn render bất kỳ Vue component nào trong Nuxt environment sử dụng `@testing-library/vue`, cho phép async setup và truy cập vào injection từ Nuxt plugin của bạn.

Điều này nên được sử dụng cùng với các utility từ Testing Library, ví dụ `screen` và `fireEvent`. Cài đặt [@testing-library/vue](https://testing-library.com/docs/vue-testing-library/intro) trong dự án của bạn để sử dụng những thứ này.

Ngoài ra, Testing Library cũng dựa vào testing global để cleanup. Bạn nên bật những thứ này trong [Vitest config](https://vitest.dev/config/#globals) của bạn.

Component được truyền vào sẽ được render bên trong `<div id="test-wrapper"></div>`.

Ví dụ:

```ts twoslash
// @noErrors
import { it, expect } from 'vitest'
import type { Component } from 'vue'
declare module '#components' {
  export const SomeComponent: Component
}
// ---cut---
// tests/components/SomeComponents.nuxt.spec.ts
import { renderSuspended } from '@nuxt/test-utils/runtime'
import { SomeComponent } from '#components'
import { screen } from '@testing-library/vue'

it('can render some component', async () => {
  await renderSuspended(SomeComponent)
  expect(screen.getByText('This is an auto-imported component')).toBeDefined()
})
```

```ts twoslash
// @noErrors
import { it, expect } from 'vitest'
// ---cut---
// tests/App.nuxt.spec.ts
import { renderSuspended } from '@nuxt/test-utils/runtime'
import App from '~/app.vue'

it('can also render an app', async () => {
  const html = await renderSuspended(App, { route: '/test' })
  expect(html).toMatchInlineSnapshot(`
    "<div id="test-wrapper">
      <div>This is an auto-imported component</div>
      <div> I am a global component </div>
      <div>Index page</div><a href="/test"> Test link </a>
    </div>"
  `)
})
```

#### `mockNuxtImport`

`mockNuxtImport` cho phép bạn mock chức năng auto import của Nuxt. Ví dụ, để mock `useStorage`, bạn có thể làm như thế này:

```ts twoslash
import { mockNuxtImport } from '@nuxt/test-utils/runtime'

mockNuxtImport('useStorage', () => {
  return () => {
    return { value: 'mocked storage' }
  }
})

// test của bạn ở đây
```

::note
`mockNuxtImport` chỉ có thể được sử dụng một lần cho mỗi mocked import cho mỗi test file. Nó thực sự là một macro được chuyển đổi thành `vi.mock` và `vi.mock` được hoisted, như được mô tả [trong Vitest docs](https://vitest.dev/api/vi.html#vi-mock).
::

Nếu bạn cần mock một Nuxt import và cung cấp implementation khác nhau giữa các test, bạn có thể làm điều đó bằng cách tạo và expose mock của bạn sử dụng [`vi.hoisted`](https://vitest.dev/api/vi.html#vi-hoisted), và sau đó sử dụng những mock đó trong `mockNuxtImport`. Sau đó bạn có quyền truy cập vào mocked import, và có thể thay đổi implementation giữa các test. Hãy cẩn thận [restore mock](https://vitest.dev/api/mock.html#mockrestore) trước hoặc sau mỗi test để hoàn tác thay đổi mock state giữa các lần chạy.

```ts twoslash
import { vi } from 'vitest'
import { mockNuxtImport } from '@nuxt/test-utils/runtime'

const { useStorageMock } = vi.hoisted(() => {
  return {
    useStorageMock: vi.fn(() => {
      return { value: 'mocked storage'}
    })
  }
})

mockNuxtImport('useStorage', () => {
  return useStorageMock
})

// Sau đó, bên trong một test
useStorageMock.mockImplementation(() => {
  return { value: 'something else' }
})
```

#### `mockComponent`

`mockComponent` cho phép bạn mock component của Nuxt.
Argument đầu tiên có thể là tên component trong PascalCase, hoặc relative path của component.
Argument thứ hai là một factory function trả về mocked component.

Ví dụ, để mock `MyComponent`, bạn có thể:

```ts twoslash
import { mockComponent } from '@nuxt/test-utils/runtime'

mockComponent('MyComponent', {
  props: {
    value: String
  },
  setup(props) {
    // ...
  }
})

// relative path hoặc alias cũng hoạt động
mockComponent('~/components/my-component.vue', async () => {
  // hoặc một factory function
  return defineComponent({
    setup(props) {
      // ...
    }
  })
})

// hoặc bạn có thể sử dụng SFC để redirect đến một mock component
mockComponent('MyComponent', () => import('./MockComponent.vue'))

// test của bạn ở đây
```

> **Lưu ý**: Bạn không thể tham chiếu local variable trong factory function vì chúng được hoisted. Nếu bạn cần truy cập Vue API hoặc các variable khác, bạn cần import chúng trong factory function của bạn.

```ts twoslash
import { mockComponent } from '@nuxt/test-utils/runtime'

mockComponent('MyComponent', async () => {
  const { ref, h } = await import('vue')

  return defineComponent({
    setup(props) {
      const counter = ref(0)
      return () => h('div', null, counter.value)
    }
  })
})
```

#### `registerEndpoint`

`registerEndpoint` cho phép bạn tạo Nitro endpoint trả về mocked data. Nó có thể hữu ích nếu bạn muốn test một component thực hiện request đến API để hiển thị một số dữ liệu.

Argument đầu tiên là tên endpoint (ví dụ `/test/`).
Argument thứ hai là một factory function trả về mocked data.

Ví dụ, để mock endpoint `/test/`, bạn có thể làm:

```ts twoslash
import { registerEndpoint } from '@nuxt/test-utils/runtime'

registerEndpoint('/test/', () => ({
  test: 'test-field'
}))
```

Theo mặc định, request của bạn sẽ được thực hiện sử dụng method `GET`. Bạn có thể sử dụng method khác bằng cách đặt một object làm argument thứ hai thay vì function.

```ts twoslash
import { registerEndpoint } from '@nuxt/test-utils/runtime'

registerEndpoint('/test/', {
  method: 'POST',
  handler: () => ({ test: 'test-field' })
})
```

> **Lưu ý**: Nếu request trong component đi đến external API, bạn có thể sử dụng `baseURL` và sau đó làm nó trống sử dụng [Nuxt Environment Override Config](/docs/getting-started/configuration#environment-overrides) (`$test`) để tất cả request của bạn sẽ đi đến Nitro server.

#### Conflict with End-To-End Testing

`@nuxt/test-utils/runtime` và `@nuxt/test-utils/e2e` cần chạy trong các testing environment khác nhau và do đó không thể được sử dụng trong cùng một file.

Nếu bạn muốn sử dụng cả end-to-end và unit testing functionality của `@nuxt/test-utils`, bạn có thể tách test của mình thành các file riêng biệt. Sau đó bạn chỉ định test environment per-file với comment đặc biệt `// @vitest-environment nuxt`, hoặc đặt tên các runtime unit test file với extension `.nuxt.spec.ts`.

`app.nuxt.spec.ts`

```ts twoslash
import { mockNuxtImport } from '@nuxt/test-utils/runtime'

mockNuxtImport('useStorage', () => {
  return () => {
    return { value: 'mocked storage' }
  }
})

```

`app.e2e.spec.ts`

```ts twoslash
import { setup, $fetch } from '@nuxt/test-utils/e2e'

await setup({
  setupTimeout: 10000,
})

// ...
```

### Using `@vue/test-utils`

Nếu bạn thích sử dụng `@vue/test-utils` một mình cho unit testing trong Nuxt, và bạn chỉ test các component không dựa vào Nuxt composable, auto-import hoặc context, bạn có thể làm theo các bước này để thiết lập.

1. Cài đặt các dependency cần thiết

   ::code-group{sync="pm"}
   ```bash [npm]
   npm i --save-dev vitest @vue/test-utils happy-dom @vitejs/plugin-vue
   ```
   ```bash [yarn]
   yarn add --dev vitest @vue/test-utils happy-dom @vitejs/plugin-vue
   ```
   ```bash [pnpm]
   pnpm add -D vitest @vue/test-utils happy-dom @vitejs/plugin-vue
   ```
   ```bash [bun]
   bun add --dev vitest @vue/test-utils happy-dom @vitejs/plugin-vue
   ```
   ::

2. Tạo `vitest.config.ts` với nội dung sau:

   ```ts
   import { defineConfig } from 'vitest/config'
   import vue from '@vitejs/plugin-vue'

   export default defineConfig({
     plugins: [vue()],
     test: {
       environment: 'happy-dom',
     },
   });
   ```

3. Thêm command mới cho test trong `package.json`

   ```json
   "scripts": {
     "build": "nuxt build",
     "dev": "nuxt dev",
     ...
     "test": "vitest"
   },
   ```

4. Tạo một component `<HelloWorld>` đơn giản `components/HelloWorld.vue` với nội dung sau:

   ```vue
   <template>
     <p>Hello world</p>
   </template>
   ```

5. Tạo một unit test đơn giản cho component mới được tạo này `~/components/HelloWorld.spec.ts`

   ```ts twoslash
   import { describe, it, expect } from 'vitest'
   import { mount } from '@vue/test-utils'

   import HelloWorld from './HelloWorld.vue'

   describe('HelloWorld', () => {
     it('component renders Hello world properly', () => {
       const wrapper = mount(HelloWorld)
       expect(wrapper.text()).toContain('Hello world')
     })
   })
   ```

6. Chạy lệnh vitest

   ::code-group{sync="pm"}
   ```bash [npm]
   npm run test
   ```
   ```bash [yarn]
   yarn test
   ```
   ```bash [pnpm]
   pnpm run test
   ```
   ```bash [bun]
   bun run test
   ```
   ::

Chúc mừng, bạn đã sẵn sàng để bắt đầu unit testing với `@vue/test-utils` trong Nuxt! Happy testing!

## End-To-End Testing

Cho end-to-end testing, chúng tôi hỗ trợ [Vitest](https://github.com/vitest-dev/vitest), [Jest](https://jestjs.io), [Cucumber](https://cucumber.io/) và [Playwright](https://playwright.dev/) làm test runner.

### Setup

Trong mỗi block `describe` nơi bạn đang tận dụng các helper method `@nuxt/test-utils/e2e`, bạn sẽ cần thiết lập test context trước khi bắt đầu.

```ts twoslash [test/my-test.spec.ts]
import { describe, test } from 'vitest'
import { setup, $fetch } from '@nuxt/test-utils/e2e'

describe('My test', async () => {
  await setup({
    // test context options
  })

  test('my test', () => {
    // ...
  })
})
```

Đằng sau hậu trường, `setup` thực hiện một số tác vụ trong `beforeAll`, `beforeEach`, `afterEach` và `afterAll` để thiết lập Nuxt test environment một cách chính xác.

Vui lòng sử dụng các tùy chọn dưới đây cho method `setup`.

#### Nuxt Config

- `rootDir`: Path đến thư mục với Nuxt app được đưa vào test.
  - Type: `string`
  - Default: `'.'`
- `configFile`: Tên của configuration file.
  - Type: `string`
  - Default: `'nuxt.config'`

<!--
- `config`: Object với configuration override.
  - Type: `NuxtConfig`
  - Default: `{}` -->

#### Timings

- `setupTimeout`: Lượng thời gian (tính bằng millisecond) cho phép `setupTest` hoàn thành công việc của nó (có thể bao gồm building hoặc generating file cho Nuxt application, tùy thuộc vào các tùy chọn được truyền).
  - Type: `number`
  - Default: `120000` hoặc `240000` trên windows

- `teardownTimeout`: Lượng thời gian (tính bằng millisecond) để cho phép tearing down test environment, chẳng hạn như đóng browser.
  - Type: `number`
  - Default: `30000`

#### Features

- `build`: Có chạy một build step riêng biệt hay không.
  - Type: `boolean`
  - Default: `true` (`false` nếu `browser` hoặc `server` bị disable, hoặc nếu `host` được cung cấp)

- `server`: Có khởi chạy server để respond request trong test suite hay không.
  - Type: `boolean`
  - Default: `true` (`false` nếu `host` được cung cấp)

- `port`: Nếu được cung cấp, đặt port của test server được khởi chạy thành giá trị này.
  - Type: `number | undefined`
  - Default: `undefined`

- `host`: Nếu được cung cấp, một URL để sử dụng làm test target thay vì building và chạy server mới. Hữu ích để chạy "thật" end-to-end test với phiên bản deployed của ứng dụng, hoặc với local server đang chạy (có thể cung cấp giảm đáng kể thời gian thực thi test). Xem [target host end-to-end example bên dưới](#target-host-end-to-end-example).
  - Type: `string`
  - Default: `undefined`

- `browser`: Đằng sau hậu trường, Nuxt test utils sử dụng [`playwright`](https://playwright.dev) để thực hiện browser testing. Nếu tùy chọn này được đặt, một browser sẽ được khởi chạy và có thể được kiểm soát trong test suite tiếp theo.
  - Type: `boolean`
  - Default: `false`
- `browserOptions`
  - Type: `object` với các thuộc tính sau
    - `type`: Loại browser để khởi chạy - `chromium`, `firefox` hoặc `webkit`
    - `launch`: `object` các tùy chọn sẽ được truyền cho playwright khi khởi chạy browser. Xem [full API reference](https://playwright.dev/docs/api/class-browsertype#browser-type-launch).
- `runner`: Chỉ định runner cho test suite. Hiện tại, [Vitest](https://vitest.dev) được khuyến nghị.
  - Type: `'vitest' | 'jest' | 'cucumber'`
  - Default: `'vitest'`

##### Target `host` end-to-end example

Một use-case phổ biến cho end-to-end testing là chạy test với deployed application chạy trong cùng environment thường được sử dụng cho Production.

Cho local development hoặc automated deploy pipeline, testing với separate local server có thể hiệu quả hơn và thường nhanh hơn so với việc cho phép test framework rebuild giữa các test.

Để sử dụng separate target host cho end-to-end test, chỉ cần cung cấp thuộc tính `host` của function `setup` với URL mong muốn.

```ts
import { setup, createPage } from '@nuxt/test-utils/e2e'
import { describe, it, expect } from 'vitest'

describe('login page', async () => {
  await setup({
    host: 'http://localhost:8787',
  })

  it('displays the email and password fields', async () => {
    const page = await createPage('/login')
    expect(await page.getByTestId('email').isVisible()).toBe(true)
    expect(await page.getByTestId('password').isVisible()).toBe(true)
  })
})
```

### APIs

#### `$fetch(url)`

Lấy HTML của server-rendered page.

```ts twoslash
import { $fetch } from '@nuxt/test-utils/e2e'

const html = await $fetch('/')
```

#### `fetch(url)`

Lấy response của server-rendered page.

```ts twoslash
import { fetch } from '@nuxt/test-utils/e2e'

const res = await fetch('/')
const { body, headers } = res
```

#### `url(path)`

Lấy URL đầy đủ cho một trang nhất định (bao gồm cả port mà server test đang chạy).

```ts twoslash
import { url } from '@nuxt/test-utils/e2e'

const pageUrl = url('/page')
// 'http://localhost:6840/page'
```

### Testing in a Browser

Chúng tôi cung cấp hỗ trợ tích hợp sẵn bằng Playwright trong `@nuxt/test-utils`, có thể sử dụng qua code hoặc thông qua Playwright test runner.

#### `createPage(url)`

Trong `vitest`, `jest` hoặc `cucumber`, bạn có thể tạo một instance trình duyệt Playwright đã được cấu hình với `createPage`, và (tuỳ chọn) trỏ nó đến một đường dẫn từ server đang chạy. Bạn có thể tìm hiểu thêm về các phương thức API có sẵn trong [tài liệu Playwright](https://playwright.dev/docs/api/class-page).

```ts twoslash
import { createPage } from '@nuxt/test-utils/e2e'

const page = await createPage('/page')
// bạn có thể truy cập tất cả API của Playwright từ biến `page`
```

#### Testing with Playwright Test Runner

Chúng tôi cũng cung cấp hỗ trợ trực tiếp cho việc test Nuxt bằng [Playwright test runner](https://playwright.dev/docs/intro).

::code-group{sync="pm"}
```bash [npm]
npm i --save-dev @playwright/test @nuxt/test-utils
```
```bash [yarn]
yarn add --dev @playwright/test @nuxt/test-utils
```
```bash [pnpm]
pnpm add -D @playwright/test @nuxt/test-utils
```
```bash [bun]
bun add --dev @playwright/test @nuxt/test-utils
```
::

Bạn có thể cung cấp cấu hình Nuxt toàn cục, với chi tiết cấu hình giống như hàm `setup()` đã đề cập ở phần trước.

```ts [playwright.config.ts]
import { fileURLToPath } from 'node:url'
import { defineConfig, devices } from '@playwright/test'
import type { ConfigOptions } from '@nuxt/test-utils/playwright'

export default defineConfig<ConfigOptions>({
  use: {
    nuxt: {
      rootDir: fileURLToPath(new URL('.', import.meta.url))
    }
  },
  // ...
})
```

::read-more{title="See full example config" to="https://github.com/nuxt/test-utils/blob/main/examples/app-playwright/playwright.config.ts" target="_blank"}
::

File test của bạn sau đó nên sử dụng `expect` và `test` trực tiếp từ `@nuxt/test-utils/playwright`:

```ts [tests/example.test.ts]
import { expect, test } from '@nuxt/test-utils/playwright'

test('test', async ({ page, goto }) => {
  await goto('/', { waitUntil: 'hydration' })
  await expect(page.getByRole('heading')).toHaveText('Welcome to Playwright!')
})
```

Ngoài ra, bạn cũng có thể cấu hình Nuxt server trực tiếp trong file test của mình:

```ts [tests/example.test.ts]
import { expect, test } from '@nuxt/test-utils/playwright'

test.use({
  nuxt: {
    rootDir: fileURLToPath(new URL('..', import.meta.url))
  }
})

test('test', async ({ page, goto }) => {
  await goto('/', { waitUntil: 'hydration' })
  await expect(page.getByRole('heading')).toHaveText('Welcome to Playwright!')
})
```
