---
title: "Custom Routing"
description: "In Nuxt, your routing is defined by the structure of your files inside the pages directory. However, since it uses vue-router under the hood, Nuxt offers you several ways to add custom routes in your project."
---

## Adding custom routes

Trong Nuxt, routing của bạn được định nghĩa bởi structure của files trong [pages directory](/docs/guide/directory-structure/pages). Tuy nhiên, since nó uses [vue-router](https://router.vuejs.org) under the hood, Nuxt offers bạn several ways để add custom routes trong project của bạn.

### Router Config

Using [router options](/docs/guide/recipes/custom-routing#router-options), bạn có thể optionally override hoặc extend routes của bạn using một function that accepts scanned routes và returns customized routes.

Nếu nó returns `null` hoặc `undefined`, Nuxt sẽ fall back đến default routes (useful để modify input array).

```ts [router.options.ts]
import type { RouterConfig } from '@nuxt/schema'

export default {
  // https://router.vuejs.org/api/interfaces/routeroptions.html#routes
  routes: (_routes) => [
    {
      name: 'home',
      path: '/',
      component: () => import('~/pages/home.vue')
    }
  ],
} satisfies RouterConfig
```

::note
Nuxt sẽ not augment bất kỳ new routes nào bạn return từ `routes` function với metadata defined trong `definePageMeta` của component bạn provide. Nếu bạn want điều đó để happen, bạn should use `pages:extend` hook which is [called at build-time](/docs/api/advanced/hooks#nuxt-hooks-build-time).
::

### Pages Hook

Bạn có thể add, change hoặc remove pages từ scanned routes với `pages:extend` nuxt hook.

For example, để prevent creating routes cho bất kỳ `.ts` files nào:

```ts [nuxt.config.ts]
import type { NuxtPage } from '@nuxt/schema'

export default defineNuxtConfig({
  hooks: {
    'pages:extend' (pages) {
      // add a route
      pages.push({
        name: 'profile',
        path: '/profile',
        file: '~/extra-pages/profile.vue'
      })

      // remove routes
      function removePagesMatching (pattern: RegExp, pages: NuxtPage[] = []) {
        const pagesToRemove: NuxtPage[] = []
        for (const page of pages) {
          if (page.file && pattern.test(page.file)) {
            pagesToRemove.push(page)
          } else {
            removePagesMatching(pattern, page.children)
          }
        }
        for (const page of pagesToRemove) {
          pages.splice(pages.indexOf(page), 1)
        }
      }
      removePagesMatching(/\.ts$/, pages)
    }
  }
})
```

### Nuxt Module

Nếu bạn plan để add một whole set của pages related với một specific functionality, bạn might want để use một [Nuxt module](/modules).

[Nuxt kit](/docs/guide/going-further/kit) provides một few ways [to add routes](/docs/api/kit/pages):
- [`extendPages`](/docs/api/kit/pages#extendpages) (callback: pages => void)
- [`extendRouteRules`](/docs/api/kit/pages#extendrouterules) (route: string, rule: NitroRouteConfig, options: ExtendRouteRulesOptions)

## Router Options

On top của customizing options cho [`vue-router`](https://router.vuejs.org/api/interfaces/routeroptions.html), Nuxt offers [additional options](/docs/api/nuxt-config#router) để customize router.

### Using `router.options`

Đây là recommended way để specify [router options](/docs/api/nuxt-config#router).

```ts [router.options.ts]
import type { RouterConfig } from '@nuxt/schema'

export default {
} satisfies RouterConfig
```

Có thể add more router options files bằng adding files within `pages:routerOptions` hook. Later items trong array override earlier ones.

::callout
Adding một router options file trong this hook sẽ switch on page-based routing, unless `optional` is set, trong which case nó sẽ only apply khi page-based routing is already enabled.
::

```ts [nuxt.config.ts]
import { createResolver } from '@nuxt/kit'

export default defineNuxtConfig({
  hooks: {
    'pages:routerOptions' ({ files }) {
      const resolver = createResolver(import.meta.url)
      // add a route
      files.push({
        path: resolver.resolve('./runtime/router-options'),
        optional: true
      })
    }
  }
})
```

### Using `nuxt.config`

**Note:** Only JSON serializable [options](/docs/api/nuxt-config#router) are configurable:

- `linkActiveClass`
- `linkExactActiveClass`
- `end`
- `sensitive`
- `strict`
- `hashMode`
- `scrollBehaviorType`

```js [nuxt.config]
export default defineNuxtConfig({
  router: {
    options: {}
  }
})
```

### Hash Mode (SPA)

Bạn có thể enable hash history trong SPA mode using `hashMode` [config](/docs/api/nuxt-config#router). Trong this mode, router uses một hash character (#) before actual URL that is internally passed. Khi enabled, **URL is never sent đến server** và **SSR is not supported**.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  ssr: false,
  router: {
    options: {
      hashMode: true
    }
  }
})
```

### Scroll Behavior for hash links

Bạn có thể optionally customize scroll behavior cho hash links. Khi bạn set [config](/docs/api/nuxt-config#router) để be `smooth` và bạn load một page với một hash link (e.g. `https://example.com/blog/my-article#comments`), bạn sẽ see rằng browser smoothly scrolls đến this anchor.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  router: {
    options: {
      scrollBehaviorType: 'smooth'
    }
  }
})
```

#### Custom History (advanced)

Bạn có thể optionally override history mode using một function that accepts base URL và returns history mode. Nếu nó returns `null` hoặc `undefined`, Nuxt sẽ fallback đến default history.

```ts [router.options.ts]
import type { RouterConfig } from '@nuxt/schema'
import { createMemoryHistory } from 'vue-router'

export default {
  // https://router.vuejs.org/api/interfaces/routeroptions.html
  history: base => import.meta.client ? createMemoryHistory(base) : null /* default */
} satisfies RouterConfig
```
