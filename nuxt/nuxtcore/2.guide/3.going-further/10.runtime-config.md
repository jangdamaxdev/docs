---
title: "Runtime Config"
description: "Nuxt provides a runtime config API to expose configuration and secrets within your application."
---

## Exposing

Để expose config và environment variables cho phần còn lại của app, bạn sẽ need để define runtime configuration trong [`nuxt.config`](/docs/guide/directory-structure/nuxt-config) file của bạn, using [`runtimeConfig`](/docs/api/nuxt-config#runtimeconfig) option.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  runtimeConfig: {
    // The private keys which are only available within server-side
    apiSecret: '123',
    // Keys within public, will be also exposed to the client-side
    public: {
      apiBase: '/api'
    }
  }
})
```

Khi adding `apiBase` đến `runtimeConfig.public`, Nuxt adds nó đến each page payload. Chúng ta có thể universally access `apiBase` trong both server và browser.

```ts
const runtimeConfig = useRuntimeConfig()

console.log(runtimeConfig.apiSecret)
console.log(runtimeConfig.public.apiBase)
```

::tip
Public runtime config accessible trong Vue templates với `$config.public`.
::

### Serialization

Runtime config của bạn sẽ be serialized trước khi being passed đến Nitro. Điều này means rằng anything that cannot be serialized và then deserialized (such as functions, Sets, Maps, và so on), should not be set trong `nuxt.config` của bạn.

Thay vì passing non-serializable objects hoặc functions vào application của bạn từ `nuxt.config` của bạn, bạn có thể place code này trong một Nuxt hoặc Nitro plugin hoặc middleware.

### Environment Variables

Cách common nhất để provide configuration là bằng using [Environment Variables](https://medium.com/chingu/an-introduction-to-environment-variables-and-how-to-use-them-f602f66d15fa).

::note
Nuxt CLI has built-in support cho reading `.env` file của bạn trong development, build và generate. Nhưng khi bạn run built server của bạn, **`.env` file của bạn will not be read**.
:read-more{to="/docs/guide/directory-structure/env"}
::

Runtime config values are **automatically replaced bởi matching environment variables tại runtime**.

Có two key requirements:

1. Desired variables của bạn must be defined trong `nuxt.config` của bạn. Điều này ensures rằng arbitrary environment variables are not exposed đến application code của bạn.

1. Only một specially-named environment variable có thể override một runtime config property. Đó là, một uppercase environment variable starting với `NUXT_` which uses `_` để separate keys và case changes.

::warning
Setting default của `runtimeConfig` values đến *differently named environment variables* (for example setting `myVar` đến `process.env.OTHER_VARIABLE`) will only work during build-time và will break trên runtime.
Nó advised để use environment variables that match structure của `runtimeConfig` object của bạn.
::

::tip{icon="i-lucide-video" to="https://youtu.be/_FYV5WfiWvs" target="_blank"}
Watch một video từ Alexander Lichter showcasing top mistake developers make using runtimeConfig.
::

#### Example

```ini [.env]
NUXT_API_SECRET=api_secret_token
NUXT_PUBLIC_API_BASE=https://nuxtjs.org
```

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  runtimeConfig: {
    apiSecret: '', // can be overridden by NUXT_API_SECRET environment variable
    public: {
      apiBase: '', // can be overridden by NUXT_PUBLIC_API_BASE environment variable
    }
  },
})
```

## Reading

### Vue App

Within Vue part của Nuxt app của bạn, bạn will need để call [`useRuntimeConfig()`](/docs/api/composables/use-runtime-config) để access runtime config.

::important
Behavior khác nhau giữa client-side và server-side:

- On client-side, only keys trong `runtimeConfig.public` và `runtimeConfig.app` (which used bởi Nuxt internally) are available, và object both writable và reactive.

- On server-side, entire runtime config available, nhưng nó read-only để avoid context sharing.
::

```vue [pages/index.vue]
<script setup lang="ts">
const config = useRuntimeConfig()

console.log('Runtime config:', config)
if (import.meta.server) {
  console.log('API secret:', config.apiSecret)
}
</script>

<template>
  <div>
    <div>Check developer console!</div>
  </div>
</template>
```

::caution
**Security note:** Be careful not để expose runtime config keys đến client-side bằng either rendering chúng hoặc passing chúng đến `useState`.
::

### Plugins

Nếu bạn want để use runtime config within bất kỳ (custom) plugin nào, bạn có thể use [`useRuntimeConfig()`](/docs/api/composables/use-runtime-config) inside của `defineNuxtPlugin` function của bạn.

```ts [plugins/config.ts]
export default defineNuxtPlugin((nuxtApp) => {
  const config = useRuntimeConfig()

  console.log('API base URL:', config.public.apiBase)
});
```

### Server Routes

Bạn có thể access runtime config within server routes cũng using `useRuntimeConfig`.

```ts [server/api/test.ts]
export default defineEventHandler(async (event) => {
  const { apiSecret } = useRuntimeConfig(event)
  const result = await $fetch('https://my.api.com/test', {
    headers: {
      Authorization: `Bearer ${apiSecret}`
    }
  })
  return result
})
```

::note
Giving `event` như argument đến `useRuntimeConfig` optional, nhưng nó recommended để pass nó để get runtime config overwritten bởi [environment variables](/docs/guide/going-further/runtime-config#environment-variables) tại runtime cho server routes.
::

## Typing Runtime Config

Nuxt tries để automatically generate một typescript interface từ provided runtime config using [unjs/untyped](https://github.com/unjs/untyped).

Nhưng nó also possible để type runtime config của bạn manually:

```ts [index.d.ts]
declare module 'nuxt/schema' {
  interface RuntimeConfig {
    apiSecret: string
  }
  interface PublicRuntimeConfig {
    apiBase: string
  }
}
// It is always important to ensure you import/export something when augmenting a type
export {}
```

::note
`nuxt/schema` provided như một convenience cho end-users để access version của schema used bởi Nuxt trong project của họ. Module authors should instead augment `@nuxt/schema`.
::
