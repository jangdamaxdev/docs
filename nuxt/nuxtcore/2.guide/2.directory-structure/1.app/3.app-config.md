---
title: app.config.ts
head.title: 'app.config.ts'
description: Expose reactive configuration within your application with the App Config file.
navigation.icon: i-lucide-file
---

Nuxt cung cấp file config `app.config` để expose reactive configuration trong ứng dụng của bạn với khả năng cập nhật nó tại runtime trong lifecycle hoặc sử dụng nuxt plugin và chỉnh sửa nó với HMR (hot-module-replacement).

Bạn có thể dễ dàng cung cấp runtime app configuration bằng file `app.config.ts`. Nó có thể có extension `.ts`, `.js`, hoặc `.mjs`.

```ts twoslash [app.config.ts]
export default defineAppConfig({
  foo: 'bar'
})
```

::caution
Đừng đặt bất kỳ giá trị bí mật nào trong file `app.config`. Nó được expose cho user client bundle.
::

::note
Khi cấu hình custom [`srcDir`](/docs/api/nuxt-config#srcdir), hãy đảm bảo đặt file `app.config` tại root của path `srcDir` mới.
::

## Usage

Để expose config và environment variables cho phần còn lại của ứng dụng, bạn sẽ cần định nghĩa configuration trong file `app.config`.

```ts twoslash [app.config.ts]
export default defineAppConfig({
  theme: {
    primaryColor: '#ababab'
  }
})
```

Bây giờ chúng ta có thể universally access `theme` cả khi server-rendering page và trong browser bằng composable [`useAppConfig`](/docs/api/composables/use-app-config).

```vue [pages/index.vue]
<script setup lang="ts">
const appConfig = useAppConfig()

console.log(appConfig.theme)
</script>
```

Utility [`updateAppConfig`](/docs/api/utils/update-app-config) có thể được sử dụng để cập nhật `app.config` tại runtime.

```vue [pages/index.vue]
<script setup>
const appConfig = useAppConfig() // { foo: 'bar' }

const newAppConfig = { foo: 'baz' }

updateAppConfig(newAppConfig)

console.log(appConfig) // { foo: 'baz' }
</script>
```

::read-more{to="/docs/api/utils/update-app-config"}
Đọc thêm về utility `updateAppConfig`.
::

## Typing App Config

Nuxt cố gắng tự động generate TypeScript interface từ app config được cung cấp nên bạn sẽ không phải type nó manually.

Tuy nhiên, có một số trường hợp mà bạn có thể muốn type nó manually. Có hai điều có thể bạn muốn type.

### App Config Input

`AppConfigInput` có thể được sử dụng bởi module authors để declare những options _input_ hợp lệ khi setting app config. Điều này sẽ không ảnh hưởng đến type của `useAppConfig()`.

```ts [index.d.ts]
declare module 'nuxt/schema' {
  interface AppConfigInput {
    /** Theme configuration */
    theme?: {
      /** Primary app color */
      primaryColor?: string
    }
  }
}

// It is always important to ensure you import/export something when augmenting a type
export {}
```

### App Config Output

Nếu bạn muốn type kết quả của việc gọi [`useAppConfig()`](/docs/api/composables/use-app-config), thì bạn sẽ muốn extend `AppConfig`.

::warning
Hãy cẩn thận khi typing `AppConfig` vì bạn sẽ overwrite types mà Nuxt infer từ app config thực tế của bạn.
::

```ts [index.d.ts]
declare module 'nuxt/schema' {
  interface AppConfig {
    // This will entirely replace the existing inferred `theme` property
    theme: {
      // You might want to type this value to add more specific types than Nuxt can infer,
      // such as string literal types
      primaryColor?: 'red' | 'blue'
    }
  }
}

// It is always important to ensure you import/export something when augmenting a type
export {}
```

## Merging Strategy

Nuxt sử dụng custom merging strategy cho `AppConfig` trong [the layers](/docs/getting-started/layers) của ứng dụng.

Strategy này được implement bằng [Function Merger](https://github.com/unjs/defu#function-merger), cho phép định nghĩa custom merging strategy cho mọi key trong `app.config` có array làm value.

::note
Function merger chỉ có thể được sử dụng trong extended layers và không phải main `app.config` trong project.
::

Đây là ví dụ về cách bạn có thể sử dụng:

::code-group

```ts twoslash [layer/app.config.ts]
export default defineAppConfig({
  // Default array value
  array: ['hello'],
})
```

```ts twoslash [app.config.ts]
export default defineAppConfig({
  // Overwrite default array value by using a merger function
  array: () => ['bonjour'],
})
```

::

## Known Limitations

Kể từ Nuxt v3.3, file `app.config.ts` được share với Nitro, dẫn đến những limitations sau:

1. Bạn không thể import Vue components trực tiếp trong `app.config.ts`.
2. Một số auto-imports không có sẵn trong Nitro context.

Những limitations này xảy ra vì Nitro process app config mà không có full Vue component support.

Trong khi có thể sử dụng Vite plugins trong Nitro config như workaround, approach này không được recommend:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  nitro: {
    vite: {
      plugins: [vue()]
    }
  }
})
```

::warning
Sử dụng workaround này có thể dẫn đến unexpected behavior và bugs. Vue plugin là một trong nhiều plugins không có sẵn trong Nitro context.
::

Related issues:
- [Issue #19858](https://github.com/nuxt/nuxt/issues/19858)
- [Issue #19854](https://github.com/nuxt/nuxt/issues/19854)

::note
Nitro v3 sẽ resolve những limitations này bằng cách remove support cho app config.
Bạn có thể track progress trong [this pull request](https://github.com/nitrojs/nitro/pull/2521).
::
